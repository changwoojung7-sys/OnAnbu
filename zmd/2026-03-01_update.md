# 2026-03-01 업데이트 일지

오늘(2026년 3월 1일)은 **ON-ANBU (온안부)** 앱의 사용성 향상을 위해 주로 **UI 구조 개선, 버그 수정 및 용어/명칭 통일 작업**을 진행했습니다.

## 1. 보호자(자녀) 메인 홈 화면 UI 개편

- **상단 레이아웃 압축 및 카드화**: 기존에 분리되어 공간을 많이 차지하던 '기상/기분 상태 문구'와 '꽃 이모지' 영역을 가로로 결합했습니다.
- **동적 배경색 카드 적용**: 결합된 영역을 둥근 모서리와 그림자가 있는 카드 형태로 만들고, 부모님의 **오늘 기분에 따라 카드 배경색이 동적으로 변하도록** 색상 맵킹을 적용했습니다.
  - *아주 좋아요*: 핑크/오렌지 빛(`bg-pink-50`)
  - *좋아요*: 연한 노랑/연두(`bg-yellow-50`)
  - *보통이에요*: 편안한 녹색(`bg-emerald-50`)
  - *피곤해요/아파요*: 차분한 보라/회색(`bg-purple-50`, `bg-slate-50`)
- 이를 통해 하단의 "오늘의 안부(히스토리 피드)"를 스크롤 없이 더 많이 볼 수 있게 되었습니다.

## 2. 부모님 기분 재선택 동기화 버그 수정

- **이슈**: 부모님 계정에서 오늘 기분을 선택한 뒤, 마음이 바뀌어 다른 기분을 다시 누르면 보호자 앱이나 DB에 반영(덮어쓰기)되지 않고 무시되는 현상 발견.
- **해결 (`app/parent/index.tsx`)**: 기존 `upsert` 로직에서 고유 복합키 처리가 미흡했던 부분을 보완하여, 저장 전 오늘 날짜의 데이터 존재 여부를 `select`로 먼저 확인하고 **있으면 `UPDATE`**, **없으면 `INSERT`** 하도록 분기 로직을 전면 수정했습니다.
- 이제 부모님 화면에서 언제든 기분을 변경해도 정상적으로 오늘 상태가 업데이트됩니다.

## 3. 앱 전반적인 호칭(용어) 개편 및 통일

- 앱의 본래 취지(부모님 외에도 배우자, 친척 등 다양한 대상 케어)에 맞게 **"부모님"이라는 고정된 단어를 "케어대상"으로 전면 교체**했습니다.
  
**[가족 관리 화면 (`app/family/index.tsx`)]**

- 리스트와 안내 문구의 "부모님"을 "케어대상"으로 변경.
- 하단에 있던 작은 텍스트 단축 링크(다른 부모님 초대)를 과감히 삭제하고, 보조 보호자 초대 버튼과 똑같은 둥근 라운드 디자인의 **[신규 케어대상 초대코드 생성하기]** 주황색 큰 버튼을 신설하여 시인성을 높였습니다.

**[초대 화면 (`invite-parent.tsx`, `invite-guardian.tsx`)]**

- '부모님을 초대하세요' ➡️ '케어대상을 초대하세요' 등으로 타이틀 및 안내, 카카오톡 공유 메시지 등 수정 완료.
- **관계 선택 폭 확장**: 기존 (어머니, 아버지, 형제 등) 관계에서 **아내, 아들, 딸, 친구, 동료, 기타** 항목을 추가하여 더 폭넓은 관계를 수용할 수 있게 되었습니다.

**[초기 역할 선택 화면 (`app/auth/role-select.tsx`)]**

- 가입/로그인 시 보여지는 "어떻게 오셨나요" 화면의 옵션 명칭을 명확하게 분리했습니다.
  - (부모님 케어) ➡️ **주 케어자로 시작할게요**
  - (자녀에게 초대) ➡️ **케어대상으로 초대받았어요**
  - (가족으로 초대) ➡️ **함께 케어할 보조 케어자예요**
